{
 "add_total_row": 1,
 "columns": [],
 "creation": "2025-07-03 14:48:47.350331",
 "disabled": 0,
 "docstatus": 0,
 "doctype": "Report",
 "filters": [
  {
   "custom_option_label": "employee_name",
   "fieldname": "employee",
   "fieldtype": "Link",
   "label": "Employee",
   "mandatory": 1,
   "options": "Employee",
   "wildcard_filter": 0
  },
  {
   "default": "Last Month",
   "fieldname": "from_date",
   "fieldtype": "Date",
   "label": "From",
   "mandatory": 1,
   "options": "",
   "wildcard_filter": 0
  },
  {
   "default": "Now",
   "fieldname": "to_date",
   "fieldtype": "Date",
   "label": "To",
   "mandatory": 1,
   "wildcard_filter": 0
  }
 ],
 "idx": 39,
 "is_standard": "Yes",
 "letter_head": "Default",
 "letterhead": null,
 "modified": "2025-11-09 14:51:18.796015",
 "modified_by": "Administrator",
 "module": "Custom Api",
 "name": "Employee Monthly Transactions",
 "owner": "Administrator",
 "prepared_report": 0,
 "query": "WITH attendance_data AS (\r\n    SELECT\r\n        attendance_date AS unified_date,\r\n        in_time AS first_in,\r\n        out_time AS last_out,\r\n        ROUND(working_hours - IFNULL(break_hours, 0), 2) AS working_hours_excl_breaks,\r\n        break_hours,\r\n        NULL AS posting_date,\r\n        NULL AS voucher_type,\r\n        NULL AS voucher_no,\r\n        NULL AS account,\r\n        NULL AS debit,\r\n        NULL AS credit,\r\n        NULL AS remarks\r\n    FROM\r\n        `tabAttendance`\r\n    WHERE\r\n        employee = %(employee)s\r\n        AND docstatus = 1\r\n        AND attendance_date BETWEEN %(from_date)s AND %(to_date)s\r\n),\r\n\r\ngl_entries AS (\r\n    SELECT\r\n        posting_date AS unified_date,\r\n        NULL AS first_in,\r\n        NULL AS last_out,\r\n        NULL AS working_hours_excl_breaks,\r\n        NULL AS break_hours,\r\n        posting_date,\r\n        voucher_type,\r\n        voucher_no,\r\n        account,\r\n        debit,\r\n        credit,\r\n        remarks\r\n    FROM\r\n        `tabGL Entry`\r\n    WHERE\r\n        party_type = 'Employee'\r\n        AND party = %(employee)s\r\n        AND posting_date BETWEEN %(from_date)s AND %(to_date)s\r\n        AND docstatus = 1\r\n)\r\n\r\n-- Final Output\r\nSELECT\r\n    unified_date AS \"Date:Date:100\",\r\n    first_in AS \"First In:Datetime:150\",\r\n    last_out AS \"Last Out:Datetime:150\",\r\n    working_hours_excl_breaks AS \"Working Hours (Excl. Breaks):Float:150\",\r\n    posting_date AS \"Posting Date:Date:100\",\r\n    voucher_type AS \"Voucher Type:Data:120\",\r\n    voucher_no AS \"Voucher #:Dynamic Link/voucher_type:120\",\r\n    account AS \"Account:Link/Account:180\",\r\n    debit AS \"Debit:Currency:100\",\r\n    credit AS \"Credit:Currency:100\",\r\n    remarks AS \"Remarks:Data:200\"\r\nFROM attendance_data\r\n\r\nUNION ALL\r\n\r\nSELECT\r\n    unified_date,\r\n    first_in,\r\n    last_out,\r\n    working_hours_excl_breaks,\r\n    posting_date,\r\n    voucher_type,\r\n    voucher_no,\r\n    account,\r\n    debit,\r\n    credit,\r\n    remarks\r\nFROM gl_entries\r\n\r\nORDER BY 1;\r\n",
 "ref_doctype": "GL Entry",
 "report_name": "Employee Monthly Transactions",
 "report_type": "Query Report",
 "roles": [
  {
   "role": "Accounts User"
  },
  {
   "role": "Accounts Manager"
  },
  {
   "role": "Auditor"
  }
 ]
}